var WPFM_MultiAppearanceSelect=function(){return{init:function(){WPFM_Common.logInfo("WPFM_MultiAppearanceSelect.init..."),jQuery(".multiselect_appearance .food-manager-category-dropdown").on("change",function(){if(jQuery(".selection-preview .preview-items li").length){var e={};jQuery(".selection-preview .preview-items li").each(function(i){var t=jQuery(this).attr("data-id"),n=jQuery(this).find("input").val(),a=jQuery(this).find("select").val();e[t]={value:n,unit_id:a}})}var i=jQuery(this).parents(".wpfm-form-group").find(".selection-preview").attr("data-name"),t="",n='<option value="">Unit</option>',a={},l=JSON.parse(appearance_params.unit_terms);jQuery.each(jQuery(this).find("option"),function(e,i){if(jQuery(this).is(":selected")){var t=jQuery(this).val(),n=jQuery(this).text();a[t]=n}}),jQuery.each(l,function(e,i){n+='<option value="'+i.term_id+'">'+i.name+"</option>"}),jQuery.each(a,function(e,a){t+='<li class="term-item" data-id="'+(e=parseInt(e))+'">',t+="<label>"+a+"</label>",t+='<div class="term-item-flex">',t+='<input type="number" name="'+i+"["+e+'][value]">',t+='<select name="'+i+"["+e+'][unit_id]">'+n+"</select>",t+="</div>",t+="</li>"}),jQuery(this).parents(".wpfm-form-group").find(".selection-preview ul").html(t),0==jQuery(this).parents(".wpfm-form-group").find(".selection-preview ul").find("li").length?jQuery(this).parents(".wpfm-form-group").find(".selection-preview").hide():jQuery(this).parents(".wpfm-form-group").find(".selection-preview").show(),e&&jQuery.each(e,function(e,i){jQuery('.selection-preview .preview-items li[data-id="'+e+'"]').find("input").val(i.value),jQuery('.selection-preview .preview-items li[data-id="'+e+'"]').find("select").val(i.unit_id)})})}}};WPFM_MultiAppearanceSelect=WPFM_MultiAppearanceSelect(),jQuery(document).ready(function(e){WPFM_MultiAppearanceSelect.init()});