FoodSubmission=function(){return{init:function(){Common.logInfo("FoodSubmission.init..."),jQuery("body").on("click",".food-manager-remove-uploaded-file",(function(){return jQuery(this).closest(".food-manager-uploaded-file").remove(),!1})),jQuery("#food_start_time").length>0&&jQuery("#food_start_time").timepicker({timeFormat:wp_food_manager_food_submission.i18n_timepicker_format,step:wp_food_manager_food_submission.i18n_timepicker_step}),jQuery("#food_end_time").length>0&&jQuery("#food_end_time").timepicker({timeFormat:wp_food_manager_food_submission.i18n_timepicker_format,step:wp_food_manager_food_submission.i18n_timepicker_step}),jQuery('input[data-picker="timepicker"]').length>0&&jQuery('input[data-picker="timepicker"]').timepicker({timeFormat:wp_food_manager_food_submission.i18n_timepicker_format,step:wp_food_manager_food_submission.i18n_timepicker_step}),jQuery('input[data-picker="datepicker"]#food_start_date').length>0&&(wp_food_manager_food_submission.start_of_week=parseInt(wp_food_manager_food_submission.start_of_week),wp_food_manager_food_submission.show_past_date?jQuery('input[data-picker="datepicker"]#food_start_date').datepicker({dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames}).on("change",(function(){jQuery("#food_end_date").datepicker("destroy"),jQuery('input[data-picker="datepicker"]#food_end_date').datepicker({minDate:jQuery("#food_start_date").val(),dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames})})):jQuery('input[data-picker="datepicker"]#food_start_date').datepicker({minDate:0,dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames}).on("change",(function(){jQuery("#food_end_date").datepicker("destroy"),jQuery('input[data-picker="datepicker"]#food_end_date').datepicker({minDate:jQuery("#food_start_date").val(),dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames})}))),jQuery('input[data-picker="datepicker"]#food_end_date').length>0&&jQuery('input[data-picker="datepicker"]#food_end_date').datepicker({dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames,beforeShow:function(e,t){var n=jQuery('input[data-picker="datepicker"]#food_start_date').datepicker("getDate");jQuery(this).datepicker("option","minDate",n)}}).on("change",(function(){jQuery("#food_registration_deadline").datepicker("destroy"),wp_food_manager_food_submission.show_past_date?jQuery('input[data-picker="datepicker"]#food_registration_deadline').datepicker({maxDate:jQuery("#food_end_date").val(),dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames}):jQuery('input[data-picker="datepicker"]#food_registration_deadline').datepicker({minDate:0,maxDate:jQuery("#food_end_date").val(),dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames})})),jQuery('input[data-picker="datepicker"]#food_registration_deadline').length>0&&(wp_food_manager_food_submission.show_past_date?jQuery('input[data-picker="datepicker"]#food_registration_deadline').datepicker({maxDate:jQuery("#food_end_date").val(),dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames}):jQuery('input[data-picker="datepicker"]#food_registration_deadline').datepicker({minDate:0,maxDate:jQuery("#food_end_date").val(),dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames})),jQuery('input[data-picker="datepicker"]').length>0&&(wp_food_manager_food_submission.show_past_date?jQuery('input[data-picker="datepicker"]').datepicker({dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames}):jQuery('input[data-picker="datepicker"]').datepicker({minDate:0,dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week,monthNames:wp_food_manager_food_submission.monthNames})),jQuery("#food_online").length>0&&"yes"==jQuery("input[name=food_online]:checked").val()&&(jQuery(".fieldset-food_venue_name").length>0&&jQuery("input[name=food_venue_name]").length>0&&(jQuery("input[name=food_venue_name]").attr("required")&&jQuery("input[name=food_venue_name]").attr("required",!1),jQuery(".fieldset-food_venue_name").hide()),jQuery(".fieldset-food_address").length>0&&jQuery("input[name=food_address]").length>0&&(jQuery("input[name=food_address]").attr("required")&&jQuery("input[name=food_address]").attr("required",!1),jQuery(".fieldset-food_address").hide()),jQuery(".fieldset-food_pincode").length>0&&jQuery("input[name=food_pincode]").length>0&&(jQuery("input[name=food_pincode]").attr("required")&&jQuery("input[name=food_pincode]").attr("required",!1),jQuery(".fieldset-food_pincode").hide()),jQuery(".fieldset-food_location").length>0&&jQuery("input[name=food_location]").length>0&&(jQuery("input[name=food_location]").attr("required")&&jQuery("input[name=food_location]").attr("required",!1),jQuery(".fieldset-food_location").hide()),jQuery(".fieldset-food_venue_ids").length>0&&jQuery(".fieldset-food_venue_ids").hide()),jQuery("#food_ticket_options").length>0&&"free"==jQuery("#food_ticket_options:checked").val()&&(jQuery("input[name=food_ticket_price]").attr("required")&&jQuery("input[name=food_ticket_price]").attr("required",!1),jQuery(".fieldset-food_ticket_price").hide()),jQuery("input[name=food_online]").on("change",FoodSubmission.actions.onlineFood),jQuery("input[name=food_ticket_options]").on("change",FoodSubmission.actions.foodTicketOptions),jQuery("body").on("click",".wpfm_add_organizer",FoodSubmission.actions.addOrganizer),jQuery("body").on("click",".wpfm_add_venue",FoodSubmission.actions.addVenue),jQuery(".add-group-row").on("click",FoodSubmission.actions.addGroupField),jQuery(document).delegate(".remove-group-row","click",FoodSubmission.actions.removeGroupField)},actions:{addGroupField:function(e){var t=jQuery(this).closest(".field"),n=0;t.find("input.group-row").each((function(){parseInt(jQuery(this).val())>n&&(n=parseInt(jQuery(this).val()))}));var i=jQuery(this).data("row").replace(/%%group-row-index%%/g,n+1);i=i.replace(/%group-row-index%/g,n+1),jQuery(this).before(i),t.find('input[data-picker="datepicker"]').length>0&&t.find('input[data-picker="datepicker"]').datepicker({dateFormat:wp_food_manager_food_submission.i18n_datepicker_format,firstDay:wp_food_manager_food_submission.start_of_week}),t.find('input[data-picker="timepicker"]').length>0&&t.find('input[data-picker="timepicker"]').timepicker({timeFormat:wp_food_manager_food_submission.i18n_timepicker_format,step:wp_food_manager_food_submission.i18n_timepicker_step}),t.find('select[multiple="multiple"]').length>0&&t.find('select[multiple="multiple"]').chosen(),e.preventDefault()},removeGroupField:function(e){jQuery("."+this.id).remove(),e.preventDefault()},onlineFood:function(e){e.preventDefault(),Common.logInfo("FoodDashboard.actions.onlineFood..."),jQuery("#food_online").length>0&&("yes"==jQuery(this).val()?(jQuery(".fieldset-food_venue_name").length>0&&jQuery("input[name=food_venue_name]").length>0&&(jQuery("input[name=food_venue_name]").attr("required")&&jQuery("input[name=food_venue_name]").attr("required",!1),jQuery(".fieldset-food_venue_name").hide()),jQuery(".fieldset-food_address").length>0&&jQuery("input[name=food_address]").length>0&&(jQuery("input[name=food_address]").attr("required")&&jQuery("input[name=food_address]").attr("required",!1),jQuery(".fieldset-food_address").hide()),jQuery(".fieldset-food_pincode").length>0&&jQuery("input[name=food_pincode]").length>0&&(jQuery("input[name=food_pincode]").attr("required")&&jQuery("input[name=food_pincode]").attr("required",!1),jQuery(".fieldset-food_pincode").hide()),jQuery(".fieldset-food_location").length>0&&jQuery("input[name=food_location]").length>0&&(jQuery("input[name=food_location]").attr("required")&&jQuery("input[name=food_location]").attr("required",!1),jQuery(".fieldset-food_location").hide()),jQuery(".fieldset-food_venue_ids").length>0&&jQuery(".fieldset-food_venue_ids").hide()):(jQuery(".fieldset-food_venue_name").length>0&&jQuery("input[name=food_venue_name]").length>0&&(jQuery("input[name=food_venue_name]").attr("required")&&jQuery("input[name=food_venue_name]").attr("required",!0),jQuery(".fieldset-food_venue_name").show()),jQuery(".fieldset-food_address").length>0&&jQuery("input[name=food_address]").length>0&&(jQuery("input[name=food_address]").attr("required")&&jQuery("input[name=food_address]").attr("required",!0),jQuery(".fieldset-food_address").show()),jQuery(".fieldset-food_pincode").length>0&&jQuery("input[name=food_pincode]").length>0&&(jQuery("input[name=food_pincode]").attr("required")&&jQuery("input[name=food_pincode]").attr("required",!0),jQuery(".fieldset-food_pincode").show()),jQuery(".fieldset-food_location").length>0&&jQuery("input[name=food_location]").length>0&&(jQuery("input[name=food_location]").attr("required")&&jQuery("input[name=food_location]").attr("required",!0),jQuery(".fieldset-food_location").show()),jQuery(".fieldset-food_venue_ids").length>0&&jQuery(".fieldset-food_venue_ids").show()))},eventTicketOptions:function(e){e.preventDefault(),Common.logInfo("FoodDashboard.actions.foodTicketOptions..."),jQuery("#food_ticket_options").length>0&&("free"==jQuery(this).val()?jQuery(".fieldset-food_ticket_price").length>0&&jQuery("input[name=food_ticket_price]").length>0&&(jQuery("input[name=food_ticket_price]").attr("required")&&jQuery("input[name=food_ticket_price]").attr("required",!1),jQuery(".fieldset-food_ticket_price").hide()):(jQuery(".fieldset-food_ticket_price").length>0&&jQuery("input[name=food_ticket_price]").length>0&&jQuery("input[name=food_ticket_price]").attr("required")&&jQuery("input[name=food_ticket_price]").attr("required",!0),jQuery(".fieldset-food_ticket_price").show()))},addOrganizer:function(e){jQuery(".wpfm_add_organizer").css("pointer-events","none"),jQuery("#wpfm_add_organizer_popup .wpfm-modal-header-close .wpfm-modal-close").trigger("click"),jQuery("body #submit-organizer-form .wpfm-form-footer .wpfm-alert-danger").remove();var t=jQuery("body #submit-organizer-form").serialize(),n=tinyMCE.get("organizer_description").getContent(),i=new FormData;jQuery("#organizer_logo").length>0&&i.append("organizer_logo",jQuery("#organizer_logo")[0].files[0]),i.append("action","add_organizer"),i.append("form_data",t),i.append("organizer_description",n),jQuery.ajax({url:wp_food_manager_food_submission.ajax_url,type:"POST",dataType:"JSON",processData:!1,contentType:!1,data:i,success:function(e){200==e.code?(jQuery("select#food_organizer_ids").prepend('<option selected="selected" value="'+e.organizer.organizer_id+'">'+e.organizer.organizer_name+"</option>"),jQuery("#food_organizer_ids").trigger("chosen:updated"),jQuery("body #submit-organizer-form .food-manager-uploaded-files").remove(),jQuery("body #submit-organizer-form")[0].reset(),jQuery(".wpfm_add_organizer").css("pointer-events","auto")):(jQuery(".wpfm_add_organizer").css("pointer-events","auto"),jQuery("body #submit-organizer-form .wpfm-form-footer .wpfm_add_organizer").after(e.message))}})},addVenue:function(e){jQuery(".wpfm_add_venue").css("pointer-events","none"),jQuery("#wpfm_add_venue_popup .wpfm-modal-header-close .wpfm-modal-close").trigger("click"),jQuery("body #submit-venue-form .wpfm-form-footer .wpfm-alert-danger").remove();var t=jQuery("body #submit-venue-form").serialize(),n=tinyMCE.get("venue_description").getContent(),i=new FormData;console.log(jQuery("#venue_logo")[0]),void 0!==jQuery("#venue_logo")[0]&&i.append("venue_logo",jQuery("#venue_logo")[0].files[0]),i.append("action","add_venue"),i.append("form_data",t),i.append("venue_description",n),jQuery.ajax({url:wp_food_manager_food_submission.ajax_url,type:"POST",dataType:"JSON",processData:!1,contentType:!1,data:i,success:function(e){200==e.code?(jQuery("select#food_venue_ids").append('<option selected="selected" value="'+e.venue.venue_id+'">'+e.venue.venue_name+"</option>"),jQuery("#food_venue_ids").trigger("chosen:updated"),jQuery("body #submit-venue-form .food-manager-uploaded-files").remove(),jQuery("body #submit-venue-form")[0].reset(),jQuery(".wpfm_add_venue").css("pointer-events","auto")):(jQuery(".wpfm_add_venue").css("pointer-events","auto"),jQuery("body #submit-venue-form .wpfm-form-footer .wpfm_add_venue").after(e.message))}})}}}},FoodSubmission=FoodSubmission(),jQuery(document).ready((function(e){FoodSubmission.init()}));