var WPFMFieldEditor=function(){return{init:function(){jQuery(".wp-food-manager-food-form-field-editor").on("init",WPFMFieldEditor.actions.initSortable),jQuery(".wp-food-manager-food-form-field-editor").trigger("init"),jQuery(".add-field").on("click",WPFMFieldEditor.actions.addNewFields),jQuery("body").on("click",".child-add-field",WPFMFieldEditor.actions.addNewChildFields),jQuery(".wp-food-manager-food-form-field-editor").on("change",".field-type select",WPFMFieldEditor.actions.changeFieldTypeOptions),jQuery(".delete-field").on("click",WPFMFieldEditor.actions.deleteField),jQuery(".reset").on("click",WPFMFieldEditor.actions.resetFields),jQuery(".wp-food-manager-organizer-form-field-editor").on("init",WPFMFieldEditor.actions.initSortable),jQuery(".wp-food-manager-organizer-form-field-editor").trigger("init")},actions:{initSortable:function(){jQuery(this).sortable({items:"tr:has(td)",cursor:"move",axis:"y",handle:"td.sort-column",scrollSensitivity:40,helper:function(e,ui){return ui.children().each((function(){jQuery(this).width(jQuery(this).width())})),ui},start:function(event,ui){ui.item.css("background-color","#FEFEE6")},stop:function(event,ui){ui.item.removeAttr("style")}}),jQuery(this).find(".field-type select").each(WPFMFieldEditor.actions.changeFieldTypeOptions),jQuery(this).find(".field-rules select:visible").chosen()},deleteField:function(){var field_type;window.confirm(wp_food_manager_form_editor.cofirm_delete_i18n)&&("group"===jQuery(this).closest("tr").data("field-type")?(jQuery(this).closest("tr").next("tr.group").remove(),jQuery(this).closest("tr").remove()):jQuery(this).closest("tr").remove());return!1},resetFields:function(){return!!window.confirm(wp_food_manager_form_editor.cofirm_reset_i18n)},addNewFields:function(){var =jQuery(this).closest("table").find("tbody#form-fields"),row=.data("field");return row=row.replace(/\[-1\]/g,"["+.find("tr").size()+"]"),.append(row),jQuery(".wp-food-manager-food-form-field-editor").trigger("init"),jQuery(".delete-field").on("click",WPFMFieldEditor.actions.deleteField),!1},addNewChildFields:function(){var =jQuery(this).closest("table.child_table").find("tbody.child-form-fields"),row=.data("field");row=row.replace(/\[-1\]/g,"["+.find("tr").size()+"]");var parnet_name=jQuery(this).closest("tr.group").prev().find("select.field_type").attr("name");return parnet_name=parnet_name.replace(/\[type\]/g,""),row=row.replace(/\[\]/g,parnet_name),.append(row),jQuery(".wp-food-manager-food-form-field-editor").trigger("init"),jQuery(".delete-field").on("click",WPFMFieldEditor.actions.deleteField),!1},changeFieldTypeOptions:function(){jQuery(this).closest("tr").find(".field-options .placeholder").hide(),jQuery(this).closest("tr").find(".field-options .options").hide(),jQuery(this).closest("tr").find(".field-options .na").hide(),jQuery(this).closest("tr").find(".field-options .file-options").hide(),jQuery(this).closest("tr").find(".field-options .taxonomy-select").hide();var field_type=jQuery(this).closest("tr").data("field-type");if("select"===jQuery(this).val()||"multiselect"===jQuery(this).val()||"button-options"===jQuery(this).val()||"radio"===jQuery(this).val()||"checkbox"===jQuery(this).val())jQuery(this).closest("tr").find(".field-options .options").show();else if("file"===jQuery(this).val())jQuery(this).closest("tr").find(".field-options .file-options").show();else if("term-select"===jQuery(this).val()||"term-checklist"===jQuery(this).val()||"term-select-multi-appearance"===jQuery(this).val()||"term-multiselect"===jQuery(this).val())jQuery(this).closest("tr").find(".field-options .taxonomy-select").show();else if("group"===jQuery(this).val())if(jQuery(this).closest("tr").next().hasClass("group"));else{var obj=jQuery(this);jQuery.ajax({url:wp_food_manager_form_editor.ajax_url,type:"POST",dataType:"HTML",data:{action:"get_group_field_html",security:wp_food_manager_form_editor.wp_food_manager_form_editor_security},success:function(responce){obj.closest("tr").attr("data-field-type","group"),obj.closest("tr").after(responce)}})}else jQuery(this).closest("tr").find(".field-options .placeholder").show();"group"===field_type&&"group"!==jQuery(this).val()&&jQuery(this).closest("tr").next().hasClass("group")&&jQuery(this).closest("tr").next().remove(),jQuery(this).closest("tr").find(".field-rules .rules").hide(),jQuery(this).closest("tr").find(".field-rules .na").hide(),jQuery(this).closest("tr").find(".field-rules .rules").show(),jQuery(this).closest("tr").find(".field-rules select:visible").chosen()}}}};WPFMFieldEditor=WPFMFieldEditor(),jQuery(document).ready((function(t){WPFMFieldEditor.init()}));